## Encrypted Messages in Bulletin Board
Advances in privacy and scaling solutions make wider adoption of blockchain technology much more realizable. With strong security guarantees backed by well founded maths, you will be able to exchange secure messages through a blockchain. You will, as always, have to be careful with handling private keys, much like you have been with passwords; there will also be better solutions to make key-management easier and more fool-proof. 

Yet this promise of being able to make secure message is not always convenient to accept when you consider the following.
1. The message exchanged could be opinionated, deeply personal or of high importance
2. Once you've written it in blockchain, it can not be reverted back
3. Now this message is publicly vieweable. Despite being in obfuscated (encrypted) form, a bad actor can try as much as he wants to break the encryption. It can even be the case that the secret has already been found out and the bad actor is passively collecting information -- no way to know.
4. Codes have bugs and vulnerabilities. Incentive to not share the knowledge of vulnerabilities could outweigh the incentive to share. 
5. Advances in cryptography and computational efficiency (e.g. quantum computing) could catchup in future. What you share now will be collected, stored and has the potential to be replayed and misused in future.
6. Your encryption keys are a single point of failure if all your messages are encrypted with it. Being able to extract the key for a single message will make it possible to decrypt every other messages -- including those shared up until that point and those to be shared in future. 

Assumption made here about the adversary are fairly practical i.e. he has access to computational resource and public content like encrypted messages, open source code and knowledge of vulnerabilities and technologies.

<img src="https://poorlydrawnlines.com/wp-content/uploads/2023/01/Interviewing_Bird.png" alt="drawing" width="500" height="400"/> 

Comparatively the end-to-end encrypted messaging applications we have been using sound much more reliable. Some might even be okay with non e2e messaging compared to the points above; at least our messages are not exposed for the whole world to see plus the ones who handle them have the incentive to keep them secure. So what can we learn from e2e messaging applications so that exchanging messages through blockchain is secure and reliable ?

## Why even try ?
Before rushing into an answer, lets ponder if we even require the ability to exchange secure message in blockchains. The term "secure message", here, is used as a generic term for a piece of information shared only between a trusted set of parties. It can be of the following forms.
- signals generated by an on-chain game about a players' secret moves that is shared only with a group
- textual or other multimedia messages 
- anonymous votes 
- response to surveys or interviews which need discretion, etc

In essence, secure exchange of message helps build systems which cling to the value of information asymmetry and human interaction. Because of this fundamental reason, we can not only expect there to be more than a handful of usecases, but we can also assume that some of these usecases can be things we may fail to realize at the outset. Now knowing how valuable secure messaging is and how conveniently web2 applications provide this service, wouldn't it just be easier to continue using web2 apps for it and use blockchains for a more web3-favored usecases altogether ? In fact, blockchain communities have been reliant upon web2 apps like Discord, Twitter and Telegram to disseminate public information, form groups to communicate in private, gather information for airdops and so on.

### "Decentralization" 
An obvious answer to the need for a product to be tied to blockchain is to go the route of decentralization-good-censorship-bad i.e. point out how web2 implementations are censor prone and how tying it to blockchain provides an alternate solution that can be relied upon. In this case, given how important the right to free speech is and how existing web2 based secure messaging services are either banned from certain places or are in close scrutiny, this claim about necessity of secure messaging through blockchain is not in itself an insufficient reason. But as we've learnt so far, it's possible for smart contracts to be black-listed, blockchain mining and token holding to be banned and some of the biggest "decentralized" chains to get paused. So the ball is likely on anyone's court right now when we talk about being a platform ideal for secure messaging.

### Integrated Products
Besides the standalone primary usecase mentioned above, secure messaging is useful as a plugin to more complex dapps. For example, it can be used in on-chain multiplayer games for private group chats or to securely log user interactions; it can be used with social dapps built on exclusivity where sharing content with only one's following could be desirable; it can be used with reward based dapps where only users with necessary credentials can decrypt the content and claim reward and so on.


With this, we've learnt that the value of secure messaging is better understood if we consider it as a small integral dapp that fits in with other products and benefits the ecosystem.


## How Signal does it
Now that we've addressed the value of secure messaging, lets examine what we can learn from well established web2 products about how to implement reliable secure messaging. In this context, we'll consider Signal application because almost every other e2e messaging apps are in some ways derived from it.
Signal's messaging protocol requires clients to use different keys to encrypt each successive message. This way even if some key gets known and the corresponding message gets decrypted, the rest of the messages sent so far and to be sent in future will still be obscure. These features are called Forward Secrecy and Post Compromise Security, and is made possible through Double Ratchet algorithm. The algorithm has been battle tested with more than a decade of use and other e2e messaging apps also make use of it because of its reliability. It's modular enough to make upgrades to the cryptographic primitives it uses without breaking the protocol. Because of this flexibility, there have been studies to make the algorithm post quantum secure.

Under the same assumptions as above and with this algorithm, many of the problems listed are alleviated in the following ways.
- Knowledge of encryption key that a passive observer has will not be useful for other messages.
- Modular and post quantum secure approaches are available.
- Point of failure is now distributed among multiple keys.


## Additional Usecase
The key refreshing mechanism is also helpful when the implementation itself requires it. For example, group communications are based on establishing a shared secret key and using that key to encrypt and decrypt group messages. When there is a change in group member, the shared secret has to be refreshed to ensure that the message exchanged is now visible to exactly the current members of the group. This necessity to update shared key upon group membership changes can also be integrated.

In conclusion, future decentralized applications are likely to require robust mechanisms of interaction between parties involved. The inherent nature of blockchain raises concerns around its reliability, which can be addressed by drawing practices from applications which we have already known to trust.